    <!DOCTYPE html>
    <html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Find Employers - JobLink</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
        <link rel="stylesheet" th:href="@{/CSS/find-employers.css}">
        <link rel="stylesheet" th:href="@{/CSS/homepage.css}">
        <script th:src="@{/JS/translate.js}"></script>
    </head>
    <body>
    <div th:replace="~{header :: header}"></div>

    <main class="employers-main">
        <div class="page-header">
            <h1 class="page-title" data-i18n="find_employers">Find Employers</h1>
            <div class="breadcrumb">
                <a href="/" data-i18n="breadcrumb_home">Home</a> / <span data-i18n="breadcrumb_find_employers">Find Employers</span>
            </div>
        </div>

        <div class="search-bar-container">
            <div class="search-input-group">
                <i class="fas fa-search"></i>
                <input type="text" data-i18n-placeholder="job_title_placeholder" placeholder="Job title, Keyword...">
            </div>
            <div class="search-input-group">
                <i class="fas fa-map-marker-alt"></i>
                <input type="text" data-i18n-placeholder="location_placeholder" placeholder="Location">
            </div>
            <div class="search-input-group">
                <i class="fas fa-layer-group"></i>
                <select>
                    <option value="" data-i18n="select_category">Select Category</option>
                    <option value="" data-i18n="cat_designer">Design</option>
                    <option value="">Development</option>
                    <option value="" data-i18n="cat_digital_marketing">Marketing</option>
                </select>
            </div>
            <button class="find-job-btn" data-i18n="find_job_btn">Find Job</button>
        </div>


            <!-- Sidebar Filters -->
    <!--        <aside class="sidebar">-->
    <!--            <button class="filter-btn">-->
    <!--                <i class="fas fa-sliders-h"></i>-->
    <!--                <span data-i18n="filter">Filter</span>-->
    <!--            </button>-->

    <!--            <div class="filter-section">-->
    <!--                <div class="filter-title">-->
    <!--                    <span><span data-i18n="location_radius">Location Radius:</span> <span class="radius-value">32 <span data-i18n="miles">miles</span></span></span>-->
    <!--                    <i class="fas fa-chevron-up"></i>-->
    <!--                </div>-->
    <!--                <div class="radius-slider">-->
    <!--                    <input type="range" min="0" max="100" value="32" class="slider" id="radiusSlider">-->
    <!--                </div>-->
    <!--            </div>-->

    <!--            <div class="filter-section">-->
    <!--                <div class="filter-title">-->
    <!--                    <span data-i18n="organization_type">Organization Type</span>-->
    <!--                    <i class="fas fa-chevron-up"></i>-->
    <!--                </div>-->
    <!--                <div class="filter-options">-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="gov">-->
    <!--                        <label for="gov" data-i18n="government">Government</label>-->
    <!--                    </div>-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="semi-gov">-->
    <!--                        <label for="semi-gov" data-i18n="semi_government">Semi Government</label>-->
    <!--                    </div>-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="ngo">-->
    <!--                        <label for="ngo" data-i18n="ngo">NGO</label>-->
    <!--                    </div>-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="private">-->
    <!--                        <label for="private" data-i18n="private_company">Private Company</label>-->
    <!--                    </div>-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="international">-->
    <!--                        <label for="international" data-i18n="international_agencies">International Agencies</label>-->
    <!--                    </div>-->
    <!--                    <div class="filter-option">-->
    <!--                        <input type="checkbox" id="others">-->
    <!--                        <label for="others" data-i18n="others">Others</label>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </aside>-->

            <!-- Main Content -->
            <div class="main-content">
                <div class="content-header">
                    <div class="sort-controls">
                        <select id="sortSelect">
                            <option value="most_jobs" data-i18n="most_jobs">Most Jobs</option>
                            <option value="latest" data-i18n="latest">Latest</option>
                            <option value="name_az" data-i18n="name_az">A ‚Üí Z</option>
                            <option value="name_za" data-i18n="name_za">Z ‚Üí A</option>
                        </select>
                        <select id="pageSize">
                            <option value="12">12 <span data-i18n="per_page">per page</span></option>
                            <option value="24">24 <span data-i18n="per_page">per page</span></option>
                            <option value="48">48 <span data-i18n="per_page">per page</span></option>
                        </select>
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn active"><i class="fas fa-th-large"></i></button>
                        <button class="view-btn"><i class="fas fa-list"></i></button>
                    </div>
                </div>

                <!-- Grid hi·ªÉn th·ªã d·ªØ li·ªáu ƒë·ªông -->
                <div class="employers-grid" id="employerGrid">
                    <p style="text-align:center;width:100%;padding:40px;color:#888;" data-i18n="click_find_job">Click "Find Job" to start searching...</p>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination"></div>
            </div>

            <!-- JS ƒë·ªông -->
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const keywordInput = document.querySelector('.search-input-group input[placeholder="Job title, Keyword..."]');
                    const locationInput = document.querySelector('.search-input-group input[placeholder="Location"]');
                    const categorySelect = document.querySelector('.search-input-group select');
                    const searchBtn = document.querySelector('.find-job-btn');
                    const sortSelect = document.getElementById('sortSelect');
                    const pageSizeSelect = document.getElementById('pageSize');
                    const employerGrid = document.getElementById('employerGrid');
                    const pagination = document.getElementById('pagination');
                    const baseUrl = window.location.origin;

                    let currentPage = 1;
                    let totalPages = 1;

                    async function fetchEmployers(page = 1) {
                        const keyword = keywordInput.value.trim();
                        const location = locationInput.value.trim();
                        const industry = categorySelect.value.trim();
                        const sort = sortSelect.value;
                        const size = pageSizeSelect.value;

                        const url = `${baseUrl}/api/employers/openposition?keyword=${encodeURIComponent(keyword)}&location=${encodeURIComponent(location)}&industry=${encodeURIComponent(industry)}&sort=${sort}&page=${page}&size=${size}`;
                        console.log("üîç Fetch:", url);

                        employerGrid.innerHTML = "<p style='text-align:center;width:100%;padding:40px;'>‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</p>";
                        pagination.innerHTML = "";

                        try {
                            const res = await fetch(url);
                            if (!res.ok) throw new Error("L·ªói khi g·ªçi API.");
                            const data = await res.json();

                            // API tr·∫£ v·ªÅ List ho·∫∑c Page
                            const employers = data.content || data;
                            totalPages = data.totalPages || 1;
                            currentPage = data.number ? data.number + 1 : 1;

                            employerGrid.innerHTML = "";

                            if (!employers || employers.length === 0) {
                                employerGrid.innerHTML = `
                                    <div style="text-align:center;width:100%;padding:40px;">
                                        <i class="fas fa-face-frown" style="font-size:3rem;color:#999;"></i>
                                        <p style="color:#999;margin-top:10px;">Kh√¥ng t√¨m th·∫•y nh√† tuy·ªÉn d·ª•ng ph√π h·ª£p.</p>
                                    </div>`;
                                return;
                            }

                            employers.forEach(emp => {
                                const card = document.createElement("div");
                                card.className = "employer-card";
                                card.innerHTML = `
                                    <div class="employer-info">
                                        <div class="employer-logo" style="background:#1976d2;color:#fff;">
                                            ${emp.companyName ? emp.companyName.charAt(0).toUpperCase() : "?"}
                                        </div>
                                        <div class="employer-details">
                                            <h3 class="employer-name">${emp.companyName}</h3>
                                            <div class="employer-meta">
                                                <span><i class="fas fa-map-marker-alt"></i> ${emp.location || "Kh√¥ng x√°c ƒë·ªãnh"}</span>
                                                <span><i class="fas fa-briefcase"></i> ${emp.openPositions || 0} v·ªã tr√≠ m·ªü</span>
                                            </div>
                                        </div>
                                    </div>
                                    <p style="margin-top:10px;font-size:14px;color:#444;">
                                        ${emp.description ? emp.description.substring(0, 150) + "..." : "Ch∆∞a c√≥ m√¥ t·∫£ c√¥ng ty."}
                                    </p>
                                    <button class="open-position-btn" onclick="window.location.href='/findemployers/${emp.employerId}'">
                                        Xem vi·ªác l√†m <i class="fas fa-arrow-right"></i>
                                    </button>`;
                                employerGrid.appendChild(card);
                            });

                            renderPagination();
                        } catch (err) {
                            console.error(err);
                            employerGrid.innerHTML = `
                                <p style="text-align:center;width:100%;padding:40px;color:red;">
                                    ‚ùå Kh√¥ng th·ªÉ t·∫£i danh s√°ch nh√† tuy·ªÉn d·ª•ng. Vui l√≤ng th·ª≠ l·∫°i!
                                </p>`;
                        }
                    }

                    function renderPagination() {
                        pagination.innerHTML = "";

                        if (totalPages <= 1) return;

                        const createBtn = (page, label, disabled = false, active = false) => {
                            const btn = document.createElement("button");
                            btn.className = "pagination-btn" + (active ? " active" : "");
                            btn.innerHTML = label;
                            btn.disabled = disabled;
                            btn.onclick = () => fetchEmployers(page);
                            return btn;
                        };

                        pagination.appendChild(createBtn(currentPage - 1, '<i class="fas fa-chevron-left"></i>', currentPage === 1));

                        for (let i = 1; i <= totalPages; i++) {
                            pagination.appendChild(createBtn(i, i.toString(), false, i === currentPage));
                        }

                        pagination.appendChild(createBtn(currentPage + 1, '<i class="fas fa-chevron-right"></i>', currentPage === totalPages));
                    }

                    // G·∫Øn s·ª± ki·ªán
                    searchBtn.addEventListener("click", () => fetchEmployers(1));
                });
            </script>

    </main>
    </body>
    </html>