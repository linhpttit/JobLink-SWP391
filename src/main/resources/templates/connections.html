<!DOCTYPE html>
<<<<<<< HEAD
<html xmlns:th="http://www.thymeleaf.org">
=======
<html xmlns:th="http://www.thymeleaf.org" lang="">
>>>>>>> 5b84532ce7c137b8c9bb0033ca31dc467a3e2141
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·∫øt N·ªëi - JobLink</title>
<<<<<<< HEAD

    <link rel="stylesheet" th:href="@{/homepage.css}">
    <link rel="stylesheet" th:href="@{/connections.css}">

</head>
<body>
=======
    <link rel="stylesheet" th:href="@{/CSS/header.css}">
    <link rel="stylesheet" th:href="@{/CSS/homepage.css}">
    <link rel="stylesheet" th:href="@{/CSS/connections.css}">
</head>
<body>
<!-- Header -->
>>>>>>> 5b84532ce7c137b8c9bb0033ca31dc467a3e2141
<div th:replace="~{header :: header}"></div>

<div class="connections-container">
    <h1>K·∫øt N·ªëi V·ªõi Ng∆∞·ªùi T√¨m Vi·ªác Kh√°c</h1>
    <!-- Updated subtitle to emphasize overlapping skills -->
    <p class="subtitle">M·ªü r·ªông m·∫°ng l∆∞·ªõi c·ªßa b·∫°n v·ªõi nh·ªØng ng∆∞·ªùi c√≥ k·ªπ nƒÉng t∆∞∆°ng t·ª±. Nh·∫Øn tin tr·ª±c ti·∫øp sau khi k·∫øt n·ªëi!</p>

    <!-- Pending Requests -->
    <div class="section" th:if="${!pendingRequests.isEmpty()}">
        <h2>Y√™u C·∫ßu K·∫øt N·ªëi</h2>
        <div class="requests-grid">
            <div th:each="request : ${pendingRequests}" class="request-card">
                <img th:src="${request.requesterAvatar != null ? request.requesterAvatar : '/images/user.png'}"
                     alt="Avatar" class="avatar">
                <div class="request-info">
                    <h3 th:text="${request.requesterName}"></h3>
                    <!-- Display overlapping skills -->
                    <p class="common-skills">
                        <strong>K·ªπ nƒÉng chung:</strong> <span th:text="${request.commonSkills}"></span>
                    </p>
                    <p class="message" th:if="${request.message != null}" th:text="${request.message}"></p>
                </div>
                <div class="request-actions">
                    <button class="btn-accept" th:attr="data-request-id=${request.requestId}">Ch·∫•p Nh·∫≠n</button>
                    <button class="btn-reject" th:attr="data-request-id=${request.requestId}">T·ª´ Ch·ªëi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Suggestions -->
    <div class="section">
        <h2>G·ª£i √ù K·∫øt N·ªëi</h2>
        <!-- Updated description to mention overlapping skills -->
        <p class="section-description">Nh·ªØng ng∆∞·ªùi t√¨m vi·ªác c√≥ k·ªπ nƒÉng tr√πng kh·ªõp v·ªõi b·∫°n</p>
        <div class="suggestions-grid">
            <div th:each="suggestion : ${suggestions}" class="suggestion-card">
                <img th:src="${suggestion.avatarUrl != null ? suggestion.avatarUrl : '/images/user.png'}"
                     alt="Avatar" class="avatar">
                <div class="suggestion-info">
                    <h3 th:text="${suggestion.fullname}"></h3>
                    <p class="job-title" th:text="${suggestion.headline}"></p>
                    <!-- Display count and list of overlapping skills -->
                    <p class="common-skills">
                        <strong th:text="${suggestion.commonSkillCount} + ' k·ªπ nƒÉng chung:'"></strong>
                        <span th:text="${#strings.listJoin(suggestion.commonSkills, ', ')}"></span>
                    </p>
                </div>
                <button class="btn-connect"
                        th:attr="data-seeker-id=${suggestion.seekerId},data-name=${suggestion.fullname},data-user-id=${suggestion.userId}">
                    G·ª≠i Y√™u C·∫ßu
                </button>
            </div>
        </div>
        <p th:if="${suggestions.isEmpty()}" class="empty-message">
            Kh√¥ng c√≥ g·ª£i √Ω k·∫øt n·ªëi n√†o. H√£y th√™m k·ªπ nƒÉng v√†o h·ªì s∆° c·ªßa b·∫°n!
        </p>
    </div>

    <!-- Sent Requests -->
    <div class="section" th:if="${!sentRequests.isEmpty()}">
        <h2>Y√™u C·∫ßu ƒê√£ G·ª≠i</h2>
        <div class="sent-requests-list">
            <div th:each="request : ${sentRequests}" class="sent-request-item">
                <img th:src="${request.targetAvatar != null ? request.targetAvatar : '/images/user.png'}"
                     alt="Avatar" class="avatar-small">
                <div class="sent-request-info">
                    <h4 th:text="${request.targetName}"></h4>
                    <span class="status" th:classappend="${request.status.toLowerCase()}"
                          th:text="${request.status}"></span>
                    <!-- Show option to message if accepted -->
                    <button th:if="${request.status == 'ACCEPTED'}"
                            class="btn-message-small"
                            th:attr="data-user-id=${request.targetUserId}"
                            onclick="startChat(this)">
                        üí¨ Nh·∫Øn tin
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Connection Request Modal -->
<div id="connectionModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>G·ª≠i Y√™u C·∫ßu K·∫øt N·ªëi</h2>
        <p>G·ª≠i l·ªùi nh·∫Øn ƒë·∫øn <strong id="targetName"></strong></p>
        <textarea id="connectionMessage" placeholder="Vi·∫øt l·ªùi nh·∫Øn c·ªßa b·∫°n (kh√¥ng b·∫Øt bu·ªôc)..." rows="4"></textarea>
        <div class="modal-actions">
            <button id="sendRequestBtn" class="btn-primary">G·ª≠i Y√™u C·∫ßu</button>
            <button class="btn-secondary close">H·ªßy</button>
        </div>
    </div>
</div>

<script th:src="@{/JS/connections.js}"></script>
<script>
    function startChat(button) {
        const userId = button.getAttribute('data-user-id');
        window.location.href = '/messages?userId=' + userId;
    }
</script>
<<<<<<< HEAD
=======
<script th:src="@{/JS/header-usermenu.js}"></script>
>>>>>>> 5b84532ce7c137b8c9bb0033ca31dc467a3e2141
</body>
</html>
