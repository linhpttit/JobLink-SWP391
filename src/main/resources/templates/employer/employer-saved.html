<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{employer/employer-layout}">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>á»¨ng viÃªn Ä‘Ã£ lÆ°u â€” AI Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
    <link rel="stylesheet" th:href="@{/css/employer-saved.css}">
</head>
<body>
<main class="wrap" layout:fragment="content">
<div class="container">
    <header>
        <div class="title">
            <h1>á»¨ng viÃªn Ä‘Ã£ lÆ°u</h1>
            <p>Theo dÃµi vÃ  quáº£n lÃ½ cÃ¡c á»©ng viÃªn tiá»m nÄƒng</p>
        </div>
        <div class="actions">
            <button class="btn" id="exportBtn">
                <i class="ri-download-line"></i>
                Xuáº¥t CSV
            </button>
            <button class="btn primary" id="bulkEmailBtn">
                <i class="ri-mail-send-line"></i>
                Gá»­i email hÃ ng loáº¡t
            </button>
        </div>
    </header>

    <!-- Additional Filters -->
    <div class="searchbar">
        <input type="text" id="searchInput" placeholder="TÃ¬m theo tÃªn, email hoáº·c sá»‘ Ä‘iá»‡n thoáº¡i..."
               th:value="${search}" />
        <select id="posFilter">
            <option value="">Táº¥t cáº£ vá»‹ trÃ­</option>
            <option th:each="position : ${positions}"
                    th:value="${position}"
                    th:text="${position}"
                    th:selected="${selectedPositions != null && selectedPositions.contains(position)}"></option>
        </select>
        <select id="statusFilter">
            <option value="">Táº¥t cáº£ tráº¡ng thÃ¡i</option>
            <option th:each="status : ${statuses}"
                    th:value="${status}"
                    th:text="${status}"
                    th:selected="${selectedStatuses != null && selectedStatuses.contains(status)}"></option>
        </select>
        <select id="educationFilter">
            <option value="">Táº¥t cáº£ há»c váº¥n</option>
            <option th:each="edu : ${educationLevels}"
                    th:value="${edu}"
                    th:text="${edu}"
                    th:selected="${selectedEducationLevels != null && selectedEducationLevels.contains(edu)}"></option>
        </select>
        <select id="locationFilter">
            <option value="">Táº¥t cáº£ Ä‘á»‹a Ä‘iá»ƒm</option>
            <option th:each="loc : ${locations}"
                    th:value="${loc}"
                    th:text="${loc}"
                    th:selected="${location != null && location.equals(loc)}"></option>
        </select>
        <select id="expFilter">
            <option value="">Táº¥t cáº£ kinh nghiá»‡m</option>
            <option value="0">0 nÄƒm</option>
            <option value="1">1 nÄƒm</option>
            <option value="2">2 nÄƒm</option>
            <option value="3">3 nÄƒm</option>
            <option value="4">4 nÄƒm</option>
            <option value="5">5+ nÄƒm</option>
        </select>
    </div>

    <div class="banner">
        <div class="banner-content">
            <h3>ÄÃ£ lÆ°u <span id="savedCount" th:text="${totalElements}">0</span> á»©ng viÃªn</h3>
            <p>CÃ¡c á»©ng viÃªn tiá»m nÄƒng Ä‘Ã£ Ä‘Æ°á»£c báº¡n Ä‘Ã¡nh dáº¥u</p>
        </div>
        <button class="btn" id="upgradeBtn">
            <i class="ri-star-line"></i>
            NÃ¢ng cáº¥p Pro
        </button>
    </div>

    <div class="card">
        <table id="candidatesTable">
            <thead>
            <tr>
                <th style="width:36px"><input id="selectAll" type="checkbox" /></th>
                <th>á»¨ng viÃªn</th>
                <th>Vá»‹ trÃ­</th>
                <th>Kinh nghiá»‡m</th>
                <th>Há»c váº¥n</th>
                <th>Äá»‹a Ä‘iá»ƒm</th>
                <th>Tráº¡ng thÃ¡i</th>
                <th>NgÃ y á»©ng tuyá»ƒn</th>
                <th>HÃ nh Ä‘á»™ng</th>
            </tr>
            </thead>
            <tbody id="tbody">
            <!-- Empty state -->
            <tr th:if="${#lists.isEmpty(applications)}">
                <td colspan="9">
                    <div class="empty-state">
                        <i class="ri-user-search-line"></i>
                        <h3>KhÃ´ng cÃ³ á»©ng viÃªn nÃ o Ä‘Æ°á»£c lÆ°u</h3>
                        <p>Khi báº¡n lÆ°u á»©ng viÃªn, há» sáº½ xuáº¥t hiá»‡n á»Ÿ Ä‘Ã¢y</p>
                    </div>
                </td>
            </tr>

            <!-- Applications list -->
            <tr th:each="app : ${applications}" th:data-id="${app.applicationId}">
                <td><input class="rowCheckbox" type="checkbox" th:data-id="${app.applicationId}" /></td>
                <td>
                    <div style="display:flex;align-items:center;gap:10px">
                        <div class="avatar" th:style="'background-image:url(' + (${app.avatarUrl} ?: 'https://i.pinimg.com/736x/d7/8b/62/d78b6277dcb138d58685bf93914acbf3.jpg') + ')'"></div>
                        <div class="name">
                            <div style="font-weight:600" th:text="${app.candidateName}">Nguyá»…n VÄƒn A</div>
                            <small th:text="${app.candidateEmail}">email@example.com</small>
                            <small th:text="${app.candidatePhone}" style="color: var(--muted); font-size: 11px;"></small>
                        </div>
                    </div>
                </td>
                <td th:text="${app.position}"></td>
                <td th:text="${app.experienceYears} + ' nÄƒm'"></td>
                <td th:text="${app.education} ?: 'ChÆ°a cáº­p nháº­t'"></td>
                <td th:text="${app.location} ?: 'ChÆ°a cáº­p nháº­t'"></td>
                <td style="text-align: center;">
                    <select class="tag status-dropdown"
                            th:classappend="'status-' + ${#strings.replace(#strings.toLowerCase(app.status), ' ', '-')}"
                            th:data-id="${app.applicationId}"
                            onchange="handleStatusChange(this)">
                        <option th:each="statusOpt : ${statuses}"
                                th:value="${statusOpt}"
                                th:text="${statusOpt}"
                                th:selected="${app.status == statusOpt}"></option>
                    </select>
                </td>
                <td th:text="${#temporals.format(app.appliedAt, 'dd/MM/yyyy')}">15/01/2024</td>
                <td class="actions-td">
                    <div class="dropdown">
                        <button class="icon-btn" title="TÃ¹y chá»n">
                            <i class="ri-more-2-fill"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="send-email-btn"
                               th:data-app-id="${app.applicationId}"
                               th:data-candidate-name="${app.candidateName}"
                               th:data-candidate-email="${app.candidateEmail}"
                               th:data-position="${app.position}">
                                <i class="ri-mail-line"></i>
                                Gá»­i email
                            </a>
                            <a href="#" class="view-cv-btn"
                               th:data-app-id="${app.applicationId}"
                               th:data-cv-url="${app.cvUrl}">
                                <i class="ri-file-text-line"></i>
                                Xem CV
                            </a>
                            <a href="#" class="bookmark-btn"
                               th:data-app-id="${app.applicationId}">
                                <i class="ri-bookmark-fill"></i>
                                Bá» lÆ°u
                            </a>
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
        <div class="muted" th:text="'Hiá»ƒn thá»‹ ' + ${#lists.size(applications)} + ' cá»§a ' + ${totalElements} + ' á»©ng viÃªn'"></div>
        <div style="display: flex; gap: 8px;">
            <button class="btn" id="prevBtn" th:disabled="${currentPage == 0}">
                <i class="ri-arrow-left-line"></i>
                TrÆ°á»›c
            </button>
            <span style="padding: 8px 12px;" id="pageInfo">
                Trang <span th:text="${currentPage + 1}">1</span> / <span th:text="${totalPages}">1</span>
            </span>
            <button class="btn" id="nextBtn" th:disabled="${currentPage == totalPages - 1}">
                Sau
                <i class="ri-arrow-right-line"></i>
            </button>
        </div>
    </div>
</div>

<!-- Bulk Email Modal -->
<div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
        <h3>Gá»­i email hÃ ng loáº¡t</h3>
        <div class="muted" id="recipientsPreview">NgÆ°á»i nháº­n: â€”</div>
        <div class="field">
            <label class="muted">TiÃªu Ä‘á»</label>
            <input id="emailSubject" placeholder="ThÆ° má»i phá»ng váº¥n â€“ Vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i AI Premium" />
        </div>
        <div class="field">
            <label class="muted">Ná»™i dung</label>
            <textarea id="emailBody">ğŸ“© TiÃªu Ä‘á»: ThÆ° má»i phá»ng váº¥n â€“ Vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i [TÃªn cÃ´ng ty]

ğŸ‘‹ KÃ­nh gá»­i [TÃªn á»©ng viÃªn],

Cáº£m Æ¡n báº¡n Ä‘Ã£ quan tÃ¢m vÃ  gá»­i há»“ sÆ¡ á»©ng tuyá»ƒn cho vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i AI Premium. Sau khi xem xÃ©t há»“ sÆ¡, chÃºng tÃ´i nháº­n tháº¥y ká»¹ nÄƒng vÃ  kinh nghiá»‡m cá»§a báº¡n ráº¥t phÃ¹ há»£p vá»›i yÃªu cáº§u tuyá»ƒn dá»¥ng hiá»‡n táº¡i.

ChÃºng tÃ´i trÃ¢n trá»ng má»i báº¡n tham dá»± ğŸ’¬ buá»•i phá»ng váº¥n Ä‘á»ƒ trao Ä‘á»•i thÃªm vá» cÃ´ng viá»‡c vÃ  cÆ¡ há»™i phÃ¡t triá»ƒn táº¡i cÃ´ng ty.

ğŸ—“ï¸ ThÃ´ng tin buá»•i phá»ng váº¥n:

â° Thá»i gian: [NgÃ y, giá» cá»¥ thá»ƒ]

ğŸ“ Äá»‹a Ä‘iá»ƒm: [Äá»‹a chá»‰ cÃ´ng ty hoáº·c link Google Meet/Zoom náº¿u phá»ng váº¥n online]

ğŸ‘¤ NgÆ°á»i phá»ng váº¥n: [TÃªn + chá»©c vá»¥ náº¿u cÃ³]

ğŸ’» HÃ¬nh thá»©c: [Trá»±c tiáº¿p / Online]

Trong buá»•i phá»ng váº¥n, báº¡n sáº½ cÃ³ cÆ¡ há»™i tÃ¬m hiá»ƒu thÃªm vá» vÄƒn hÃ³a lÃ m viá»‡c, dá»± Ã¡n hiá»‡n táº¡i, vÃ  Ä‘á»‹nh hÆ°á»›ng phÃ¡t triá»ƒn nghá» nghiá»‡p táº¡i AI Premium.

Vui lÃ²ng ğŸ“§ pháº£n há»“i xÃ¡c nháº­n tham dá»± trÆ°á»›c [thá»i háº¡n xÃ¡c nháº­n, vÃ­ dá»¥: 17h ngÃ y 31/10/2025] Ä‘á»ƒ chÃºng tÃ´i sáº¯p xáº¿p lá»‹ch phá»ng váº¥n phÃ¹ há»£p.
Náº¿u báº¡n cáº§n thay Ä‘á»•i thá»i gian hoáº·c cÃ³ báº¥t ká»³ tháº¯c máº¯c nÃ o, hÃ£y liÃªn há»‡ qua [Email hoáº·c SÄT cá»§a HR] nhÃ©.

Ráº¥t mong Ä‘Æ°á»£c gáº·p báº¡n trong buá»•i phá»ng váº¥n sáº¯p tá»›i!

TrÃ¢n trá»ng,
ğŸ“ [TÃªn ngÆ°á»i gá»­i]
[Chá»©c vá»¥] â€“ AI Premium
ğŸ“ [Sá»‘ Ä‘iá»‡n thoáº¡i] | âœ‰ï¸ [Email]</textarea>
        </div>
        <div class="footer">
            <button class="btn" id="closeModal">
                <i class="ri-close-line"></i>
                Huá»·
            </button>
            <button class="btn primary" id="sendEmailBtn">
                <i class="ri-mail-open-line"></i>
                Má»Ÿ Gmail
            </button>
        </div>
    </div>
</div>

<!-- Single Email Modal -->
<div class="modal-backdrop" id="singleEmailModal">
    <div class="modal">
        <h3>Gá»­i email cho á»©ng viÃªn</h3>
        <div class="muted" id="singleRecipient">NgÆ°á»i nháº­n: â€”</div>
        <div class="field">
            <label class="muted">TiÃªu Ä‘á»</label>
            <input id="singleEmailSubject" placeholder="ThÆ° má»i phá»ng váº¥n â€“ Vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i AI Premium" />
        </div>
        <div class="field">
            <label class="muted">Ná»™i dung</label>
            <textarea id="singleEmailBody">ğŸ“© TiÃªu Ä‘á»: ThÆ° má»i phá»ng váº¥n â€“ Vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i AI Premium

ğŸ‘‹ KÃ­nh gá»­i [TÃªn á»©ng viÃªn],

Cáº£m Æ¡n báº¡n Ä‘Ã£ quan tÃ¢m vÃ  gá»­i há»“ sÆ¡ á»©ng tuyá»ƒn cho vá»‹ trÃ­ [TÃªn vá»‹ trÃ­] táº¡i [TÃªn cÃ´ng ty]. Sau khi xem xÃ©t há»“ sÆ¡, chÃºng tÃ´i nháº­n tháº¥y ká»¹ nÄƒng vÃ  kinh nghiá»‡m cá»§a báº¡n ráº¥t phÃ¹ há»£p vá»›i yÃªu cáº§u tuyá»ƒn dá»¥ng hiá»‡n táº¡i.

ChÃºng tÃ´i trÃ¢n trá»ng má»i báº¡n tham dá»± ğŸ’¬ buá»•i phá»ng váº¥n Ä‘á»ƒ trao Ä‘á»•i thÃªm vá» cÃ´ng viá»‡c vÃ  cÆ¡ há»™i phÃ¡t triá»ƒn táº¡i cÃ´ng ty.

ğŸ—“ï¸ ThÃ´ng tin buá»•i phá»ng váº¥n:

â° Thá»i gian: [NgÃ y, giá» cá»¥ thá»ƒ]

ğŸ“ Äá»‹a Ä‘iá»ƒm: [Äá»‹a chá»‰ cÃ´ng ty hoáº·c link Google Meet/Zoom náº¿u phá»ng váº¥n online]

ğŸ‘¤ NgÆ°á»i phá»ng váº¥n: [TÃªn + chá»©c vá»¥ náº¿u cÃ³]

ğŸ’» HÃ¬nh thá»©c: [Trá»±c tiáº¿p / Online]

Trong buá»•i phá»ng váº¥n, báº¡n sáº½ cÃ³ cÆ¡ há»™i tÃ¬m hiá»ƒu thÃªm vá» vÄƒn hÃ³a lÃ m viá»‡c, dá»± Ã¡n hiá»‡n táº¡i, vÃ  Ä‘á»‹nh hÆ°á»›ng phÃ¡t triá»ƒn nghá» nghiá»‡p táº¡i AI Premium.

Vui lÃ²ng ğŸ“§ pháº£n há»“i xÃ¡c nháº­n tham dá»± trÆ°á»›c [thá»i háº¡n xÃ¡c nháº­n, vÃ­ dá»¥: 17h ngÃ y 31/10/2025] Ä‘á»ƒ chÃºng tÃ´i sáº¯p xáº¿p lá»‹ch phá»ng váº¥n phÃ¹ há»£p.
Náº¿u báº¡n cáº§n thay Ä‘á»•i thá»i gian hoáº·c cÃ³ báº¥t ká»³ tháº¯c máº¯c nÃ o, hÃ£y liÃªn há»‡ qua [Email hoáº·c SÄT cá»§a HR] nhÃ©.

Ráº¥t mong Ä‘Æ°á»£c gáº·p báº¡n trong buá»•i phá»ng váº¥n sáº¯p tá»›i!

TrÃ¢n trá»ng,
ğŸ“ [TÃªn ngÆ°á»i gá»­i]
[Chá»©c vá»¥] â€“ AI Premium
ğŸ“ [Sá»‘ Ä‘iá»‡n thoáº¡i] | âœ‰ï¸ [Email]</textarea>
        </div>
        <div class="footer">
            <button class="btn" id="closeSingleModal">
                <i class="ri-close-line"></i>
                Huá»·
            </button>
            <button class="btn primary" id="sendSingleEmailBtn">
                <i class="ri-mail-open-line"></i>
                Má»Ÿ Gmail
            </button>
        </div>
    </div>
</div>

<div class="toast" id="toast"></div>

<script th:src="@{/js/employer-saved.js}"></script>
</main>
</body>
</html>