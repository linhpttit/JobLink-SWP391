<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{employer/employer-layout}">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>B·∫£ng gi√° d·ªãch v·ª•</title>
  <link rel="stylesheet" th:href="@{/service-packages.css}"/>
</head>
<body layout:fragment="content">
<main class="wrap" role="main">
  <header class="page-hd">
    <h1 class="page-title">D·ªãch v·ª• ƒëƒÉng tin</h1>
    <p class="page-sub">Ch·ªçn g√≥i ph√π h·ª£p ƒë·ªÉ tƒÉng t·ªëc tuy·ªÉn d·ª•ng c·ªßa b·∫°n.</p>
  </header>

  <!-- Danh s√°ch g√≥i -->
  <section class="pkg-list" aria-label="C√°c g√≥i d·ªãch v·ª•">
    <article class="pkg" th:each="p : ${packages}">
      <!-- Minh ho·∫° -->
      <figure class="pkg__art">
        <img th:src="${p.bannerUrl} ?: @{/img/sample-card.png}"
             alt="" loading="lazy" width="320" height="220"/>
      </figure>

      <!-- N·ªôi dung -->
      <div class="pkg__body">
        <header class="pkg__hd">
          <div class="pkg__title">
            <span class="pkg__flash" th:if="${p.flash}" aria-label="N·ªïi b·∫≠t">‚ö°</span>
            <h2 class="h2" th:text="${p.name}">Tin c∆° b·∫£n</h2>
            <a class="pkg__help" th:if="${p.helpUrl}" th:href="${p.helpUrl}" target="_blank" rel="noopener">
              T√¨m hi·ªÉu th√™m
            </a>
          </div>
          <span class="badge badge--new" th:if="${p.isNew}">M·ªöI</span>
        </header>

        <p class="pkg__desc" th:text="${p.description}">
          Tin c·ªßa b·∫°n ƒë∆∞·ª£c ƒëƒÉng trong 4 tu·∫ßn, ch∆∞a bao g·ªìm d·ªãch v·ª• n√¢ng c·∫•p/hi·ªáu ·ª©ng.
        </p>

        <!-- Ph·∫°m vi (t√πy ch·ªçn) -->
        <dl class="pkg__scope" th:if="${p.scope != null}">
          <div class="scope-row">
            <dt>ƒê·ªãa ƒëi·ªÉm</dt>
            <dd th:text="${p.scope.locations}">H√† N·ªôi, TP.HCM, B√¨nh D∆∞∆°ng</dd>
          </div>
          <div class="scope-row">
            <dt>C·∫•p b·∫≠c</dt>
            <dd th:text="${p.scope.levels}">Nh√¢n vi√™n, C·ªông t√°c vi√™n</dd>
          </div>
          <div class="scope-row">
            <dt>Ng√†nh ngh·ªÅ</dt>
            <dd>
              <span th:text="${p.scope.industries}">CNTT, T√†i ch√≠nh‚Ä¶</span>
              <a class="scope-more" th:if="${p.scopeDetailUrl}" th:href="${p.scopeDetailUrl}">Chi ti·∫øt</a>
            </dd>
          </div>
        </dl>

        <!-- Th√¥ng tin & h√†nh ƒë·ªông -->
        <div class="pkg__grid">
          <div class="cell">
            <div class="label">S·ªë l∆∞·ª£ng</div>
            <div class="stepper">
              <button type="button" class="btn-step" th:attr="data-id=${p.id}" data-act="-"
                      aria-label="Gi·∫£m s·ªë l∆∞·ª£ng">‚àí</button>
              <input class="qty" type="number" min="1"
                     th:value="${p.quantity}" th:name="'qty_'+${p.id}"
                     inputmode="numeric" aria-label="S·ªë l∆∞·ª£ng">
              <button type="button" class="btn-step" th:attr="data-id=${p.id}" data-act="+"
                      aria-label="TƒÉng s·ªë l∆∞·ª£ng">Ôºã</button>
            </div>
          </div>

          <div class="cell">
            <div class="label">Th·ªùi l∆∞·ª£ng</div>
            <div class="value" th:text="${p.duration} + ' tu·∫ßn'">4 tu·∫ßn</div>
          </div>

          <div class="cell price-col">
            <div class="label">Gi√° b√°n</div>
            <div class="price">
              <span class="strike" th:if="${p.originalPrice != null}"
                    th:text="${#numbers.formatDecimal(p.originalPrice,0,'COMMA',0,'POINT')} + 'ƒë'">3,690,000ƒë</span>
              <span class="sale"
                    th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + 'ƒë'">1,720,000ƒë</span>
            </div>
          </div>

          <div class="cell actions">
            <button class="btn-add" th:attr="data-id=${p.id}" type="button">
              üõí Th√™m v√†o gi·ªè
            </button>
          </div>
        </div>
      </div>
    </article>

    <div class="empty" th:if="${#lists.isEmpty(packages)}">
      Hi·ªán ch∆∞a c√≥ g√≥i n√†o kh·∫£ d·ª•ng.
    </div>
  </section>
</main>

<script>
  // tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng (client-side demo)
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.btn-step'); if (!btn) return;
    const card = btn.closest('.pkg'); const qty = card.querySelector('.qty');
    const sign = btn.dataset.act === '+' ? 1 : -1;
    const v = Math.max(1, (parseInt(qty.value || '1', 10) + sign));
    qty.value = v;
  });
</script>
</body>
</html>
