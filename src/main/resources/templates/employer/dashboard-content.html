<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{employer/employer-layout}">
<head>
    <title>Dashboard - Employer</title>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        /* Override content-area width */
        .content-area {
            width: 100% !important;
            max-width: 100% !important;
            flex: 1 !important;
        }
        
        .dashboard-wrapper {
            padding: 30px;
            background: #f5f7fa;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        /* Premium Banner */
        .premium-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px 30px;
            border-radius: 12px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .premium-content h3 {
            font-size: 18px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .premium-content p {
            font-size: 13px;
            opacity: 0.9;
        }

        .premium-btn {
            background: white;
            color: #667eea;
            padding: 10px 25px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .premium-btn:hover {
            transform: translateY(-2px);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            display: flex;
            flex-direction: column;
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            position: relative;
            overflow: hidden;
            border: 1px solid #f0f0f0;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            width: 100%;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-value {
            font-size: 42px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            line-height: 1;
            display: flex;
            width: 100%;
            justify-content: flex-start;
        }

        .stat-label {
            color: #95a5a6;
            font-size: 14px;
            font-weight: 400;
            display: flex;
            width: 100%;
            justify-content: flex-start;
        }

        .stat-change {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            background: #e8f5e9;
            color: #2ecc71;
        }

        /* AI Section */
        .ai-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 12px;
            color: white;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-content h3 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .ai-content p {
            font-size: 14px;
            opacity: 0.9;
        }

        .ai-btn {
            background: white;
            color: #667eea;
            padding: 12px 30px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .content-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .content-card h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 16px;
        }

        .content-card .icon {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .job-item {
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .job-item:last-child {
            border-bottom: none;
        }

        .job-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .job-meta {
            font-size: 13px;
            color: #7f8c8d;
        }

        .candidate-item {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #e0e6ed;
            transition: background 0.2s;
        }

        .candidate-item:hover {
            background: #f8f9fa;
        }

        .candidate-item:last-child {
            border-bottom: none;
        }

        .candidate-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .candidate-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .candidate-details h5 {
            margin: 0 0 5px 0;
            color: #2c3e50;
            font-size: 16px;
        }

        .candidate-details p {
            margin: 0 0 8px 0;
            color: #7f8c8d;
            font-size: 13px;
        }
        
        .candidate-actions {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            position: relative;
        }
        
        .candidate-actions > div,
        .candidate-actions > button {
            width: auto;
        }
        
        .match-badge-wrapper {
            position: relative;
            display: inline-block;
        }
        
        .match-badge {
            background: #d4edda;
            color: #28a745;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: help;
            position: relative;
            display: inline-block;
        }
        
        .match-details {
            display: none;
            position: fixed;
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            z-index: 9999;
            min-width: 280px;
            max-width: 320px;
            font-size: 12px;
            white-space: normal;
            text-align: left;
        }
        
        .match-badge:hover .match-details {
            display: block !important;
        }
        
        .match-details:hover {
            display: block !important;
        }
        
        .match-detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .match-detail-item:last-child {
            border-bottom: none;
        }
        
        .match-detail-label {
            color: #7f8c8d;
            font-weight: 500;
        }
        
        .match-detail-value {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .match-detail-bar {
            height: 4px;
            background: #e0e6ed;
            border-radius: 2px;
            margin-top: 4px;
            overflow: hidden;
        }
        
        .match-detail-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .skill-tag {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            margin-right: 5px;
            margin-top: 5px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .chart-card canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h4 {
            color: #2c3e50;
            font-size: 16px;
        }

        .chart-placeholder {
            height: 250px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
        }

        .action-btn {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .action-btn:hover {
            background: #5568d3;
        }

        .action-btn.secondary {
            background: #e0e6ed;
            color: #2c3e50;
        }

        .action-btn.secondary:hover {
            background: #d0d6dd;
        }

        @media (max-width: 1280px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .content-grid,
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            /* Responsive cho candidate item */
            .candidate-item {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .candidate-info {
                flex-direction: column;
                align-items: flex-start;
                text-align: left;
            }
            
            .candidate-avatar {
                width: 60px;
                height: 60px;
                font-size: 20px;
            }
            
            .candidate-actions {
                align-items: stretch;
                width: 100%;
            }
            
            .candidate-actions > div:last-child {
                flex-direction: column;
                width: 100%;
            }
            
            .candidate-actions button {
                width: 100%;
                justify-content: center;
            }
            
            .match-badge-wrapper {
                width: 100%;
                text-align: center;
            }
            
            .match-badge {
                display: inline-block;
            }
            
            .match-details {
                left: 0;
                right: 0;
                min-width: auto;
                width: calc(100% - 20px);
                margin: 0 10px;
            }
            
            /* Responsive cho charts */
            .chart-card {
                margin-bottom: 20px;
            }
            
            .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .chart-header h4 {
                font-size: 16px;
            }
            
            .chart-header select {
                width: 100%;
                font-size: 14px;
            }
            
            .chart-card > div[style*="height: 350px"] {
                height: 300px !important;
                padding: 15px !important;
            }
            
            #candidatesStatusChart {
                max-width: 250px !important;
                max-height: 250px !important;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .candidate-details h5 {
                font-size: 14px;
            }
            
            .candidate-details p {
                font-size: 12px;
            }
            
            .skill-tag {
                font-size: 10px;
                padding: 3px 8px;
            }
            
            .candidate-actions button {
                font-size: 13px;
                padding: 8px 12px;
            }
            
            .match-badge {
                font-size: 11px;
                padding: 3px 10px;
            }
            
            /* Responsive cho charts mobile */
            .chart-header h4 {
                font-size: 14px;
            }
            
            .chart-header select {
                font-size: 12px;
                padding: 4px 8px;
            }
            
            .chart-card > div[style*="height: 350px"] {
                height: 250px !important;
                padding: 10px !important;
            }
            
            #candidatesStatusChart {
                max-width: 200px !important;
                max-height: 200px !important;
            }
            
            .content-card h4 {
                font-size: 16px;
            }
            
            .stat-card h3 {
                font-size: 24px;
            }
            
            .stat-card p {
                font-size: 12px;
            }
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
            overflow-y: auto;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 1px solid #e0e6ed;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            color: #2c3e50;
        }

        .close-modal {
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            width: 30px;
            height: 30px;
            line-height: 1;
        }

        .close-modal:hover {
            color: #000;
        }

        .modal-body {
            padding: 30px;
        }

        .profile-section {
            margin-bottom: 30px;
        }

        .profile-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-section h4 i {
            color: #667eea;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .loading i {
            font-size: 48px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .candidate-item:hover {
            background-color: #f8f9fa;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        /* Custom scrollbar cho danh sách ứng viên */
        .candidates-scroll-container::-webkit-scrollbar {
            width: 8px;
        }

        .candidates-scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .candidates-scroll-container::-webkit-scrollbar-thumb {
            background: #c0c0c0;
            border-radius: 10px;
            transition: background 0.3s;
        }

        .candidates-scroll-container::-webkit-scrollbar-thumb:hover {
            background: #a0a0a0;
        }

        /* Firefox scrollbar */
        .candidates-scroll-container {
            scrollbar-width: thin;
            scrollbar-color: #c0c0c0 #f1f1f1;
        }

        .view-profile-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
        }

        .view-profile-btn:hover {
            background: #5568d3;
        }
        
        .view-profile-btn-new {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.1);
        }

        .view-profile-btn-new:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }
        
        .send-invitation-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .send-invitation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .send-invitation-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div layout:fragment="content" class="dashboard-wrapper">
        <!-- Premium Banner -->
        <div class="premium-banner">
            <div class="premium-content">
                <h3>
                    <i class="fas" th:classappend="${currentTier == 0 ? 'fa-gift' : (currentTier == 1 ? 'fa-briefcase' : (currentTier == 2 ? 'fa-gem' : 'fa-trophy'))}"></i>
                    Gói <span th:text="${currentTier == 0 ? 'FREE' : (currentTier == 1 ? 'BASIC' : (currentTier == 2 ? 'PREMIUM' : 'ENTERPRISE'))}">PREMIUM</span>
                </h3>
                <p th:text="${currentTier == 0 ? 'Nâng cấp để sử dụng đầy đủ tính năng' : 
                             (currentTier == 1 ? 'Nâng cấp lên Premium để có thêm tính năng cao cấp' : 
                             (currentTier == 2 ? 'Bạn đang sử dụng gói Premium với đầy đủ tính năng' : 
                             'Bạn đang sử dụng gói cao cấp nhất với AI Chat Bot'))}">
                    Gói cần sử dụng để đăng tất cả các gói tin tuyển dụng cao cấp
                </p>
            </div>
            <a th:href="@{/payment/upgrade}" style="text-decoration: none;">
                <button class="premium-btn">Quản lý gói</button>
            </a>
        </div>

        <!-- Stats Grid Header with Filter -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0; color: #2c3e50;">Thống kê tổng quan</h3>
            <select id="statsFilterPeriod" style="padding: 8px 15px; border: 1px solid #e0e6ed; border-radius: 6px; font-size: 14px; cursor: pointer;">
                <option value="1day" selected>1 ngày gần nhất</option>
                <option value="7days">7 ngày gần nhất</option>
                <option value="1month">1 tháng gần nhất</option>
                <option value="3months">3 tháng gần nhất</option>
                <option value="6months">6 tháng gần nhất</option>
                <option value="12months">12 tháng gần nhất</option>
            </select>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card" style="--accent-color: #3498db;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #e3f2fd; color: #3498db;">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <span class="stat-change" id="jobsChange">+0%</span>
                </div>
                <div class="stat-value" id="totalJobsValue">0</div>
                <div class="stat-label">Số lượng tuyển dụng</div>
            </div>

            <div class="stat-card" style="--accent-color: #2ecc71;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #d4edda; color: #2ecc71;">
                        <i class="fas fa-users"></i>
                    </div>
                    <span class="stat-change" id="applicationsChange">+0%</span>
                </div>
                <div class="stat-value" id="totalApplicationsValue">0</div>
                <div class="stat-label">Ứng viên ứng tuyển</div>
            </div>

            <div class="stat-card" style="--accent-color: #e74c3c;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #f8d7da; color: #e74c3c;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <span class="stat-change" id="pendingChange">+0%</span>
                </div>
                <div class="stat-value" id="pendingReviewValue">0</div>
                <div class="stat-label">Đợi xử lý phỏng vấn</div>
            </div>

            <div class="stat-card" style="--accent-color: #9b59b6;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #e8daef; color: #9b59b6;">
                        <i class="fas fa-eye"></i>
                    </div>
                    <span class="stat-change" id="reviewedChange">+0%</span>
                </div>
                <div class="stat-value" id="reviewedCountValue">0</div>
                <div class="stat-label">Ứng viên đã xem CV</div>
            </div>

            <div class="stat-card" style="--accent-color: #e67e22;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #fdecea; color: #e67e22;">
                        <i class="fas fa-user-times"></i>
                    </div>
                    <span class="stat-change" id="rejectedChange">+0%</span>
                </div>
                <div class="stat-value" id="rejectedCountValue">0</div>
                <div class="stat-label">Ứng viên bị từ chối</div>
            </div>

            <div class="stat-card" style="--accent-color: #27ae60;">
                <div class="stat-header">
                    <div class="stat-icon" style="background: #d5f4e6; color: #27ae60;">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <span class="stat-change" id="acceptedChange">+0%</span>
                </div>
                <div class="stat-value" id="acceptedCountValue">0</div>
                <div class="stat-label">Ứng viên đã được chấp nhận</div>
            </div>
        </div>

        <!-- AI Section -->
        <div class="ai-section">
            <div class="ai-content">
                <h3>AI Talent Suite</h3>
                <p>Khả năng AI có thể tích hợp trường và tìm ứng viên phù hợp</p>
            </div>
            <button class="ai-btn" onclick="openChatbot()">
                <i class="fas fa-robot"></i>
                Khởi chạy AI
            </button>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Market Analysis -->
            <div class="content-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="margin: 0;">
                        <div class="icon" style="background: #e3f2fd; color: #3498db;">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        Phân tích thị trường
                    </h4>
                    <select id="marketPositionFilter" style="padding: 6px 12px; border: 1px solid #e0e6ed; border-radius: 6px; font-size: 13px; cursor: pointer;">
                        <!-- Options will be loaded dynamically -->
                    </select>
                </div>
                
                <div id="marketAnalysisContent">
                    <div style="text-align: center; padding: 20px; color: #7f8c8d;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 24px;"></i>
                        <p>Đang tải dữ liệu...</p>
                    </div>
                </div>
            </div>

            <!-- Top Candidates -->
            <!-- Gợi ý ứng viên - Chỉ hiển thị cho Premium (tier >= 2) -->
            <div class="content-card" th:if="${currentTier != null and currentTier >= 2}">
                <h4>
                    <div class="icon" style="background: #d4edda; color: #2ecc71;">
                        <i class="fas fa-star"></i>
                    </div>
                    Gợi ý ứng viên
                    <span style="font-size: 0.75rem; color: #f39c12; margin-left: 8px;">
                        <i class="fas fa-crown"></i> Premium
                    </span>
                </h4>
                
                <!-- Hiển thị danh sách ứng viên từ backend -->
                <div th:if="${recommendedCandidates != null and !recommendedCandidates.isEmpty()}" 
                     style="max-height: 400px; overflow-y: auto; overflow-x: hidden; padding-right: 5px;"
                     class="candidates-scroll-container">
                    <div class="candidate-item" th:each="candidate : ${recommendedCandidates}" 
                         th:attr="data-seeker-id=${candidate.seekerId}">
                        <div class="candidate-info">
                            <div class="candidate-avatar" th:text="${candidate.initials}">NA</div>
                            <div class="candidate-details">
                                <h5 th:text="${candidate.fullname}">Tên ứng viên</h5>
                                <p th:text="${candidate.experienceYears != null ? 'Kinh nghiệm: ' + candidate.experienceYears + ' năm' : 'Chưa cập nhật kinh nghiệm'}">Kinh nghiệm: 0 năm</p>
                                <div>
                                    <span class="skill-tag" th:each="skill : ${candidate.skills}" th:text="${skill}">Skill</span>
                                    <span class="skill-tag" th:if="${candidate.skills == null or candidate.skills.isEmpty()}" style="background: #f0f0f0; color: #999;">Chưa có kỹ năng</span>
                                </div>
                            </div>
                        </div>
                        <div class="candidate-actions" style="display: flex; flex-direction: column; gap: 12px; align-items: flex-end;">
                            <!-- Match Badge ở trên -->
                            <div class="match-badge-wrapper">
                                <span class="match-badge" 
                                      th:style="${'background: ' + (candidate.matchPercentage >= 80 ? '#d4edda' : candidate.matchPercentage >= 60 ? '#fff3cd' : '#f8d7da') + '; color: ' + (candidate.matchPercentage >= 80 ? '#28a745' : candidate.matchPercentage >= 60 ? '#ffc107' : '#dc3545')}"
                                      title="Hover để xem chi tiết">
                                    <span th:text="${candidate.matchPercentage + '% phù hợp'}">95% phù hợp</span>
                                    <!-- Chi tiết matching breakdown -->
                                    <div class="match-details" onclick="event.stopPropagation();">
                                        <div style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; border-bottom: 2px solid #667eea; padding-bottom: 8px;">
                                            <i class="fas fa-chart-pie"></i> Chi tiết độ phù hợp
                                        </div>
                                        
                                        <!-- Skills Match -->
                                        <div class="match-detail-item">
                                            <span class="match-detail-label">
                                                <i class="fas fa-code" style="color: #3498db;"></i> Kỹ năng (60%)
                                            </span>
                                            <span class="match-detail-value" 
                                                  th:text="${candidate.matchingSkillCount + '/' + candidate.totalSkillCount}">
                                                3/5
                                            </span>
                                        </div>
                                        <div class="match-detail-bar">
                                            <div class="match-detail-bar-fill" 
                                                 th:style="${'width: ' + (candidate.totalSkillCount > 0 ? (candidate.matchingSkillCount * 100.0 / candidate.totalSkillCount) : 0) + '%'}">
                                            </div>
                                        </div>
                                        
                                        <!-- Experience Match -->
                                        <div class="match-detail-item" style="margin-top: 8px;">
                                            <span class="match-detail-label">
                                                <i class="fas fa-briefcase" style="color: #2ecc71;"></i> Kinh nghiệm (25%)
                                            </span>
                                            <span class="match-detail-value" 
                                                  th:text="${candidate.experienceMatch ? '✓ Đạt' : '✗ Chưa đạt'}"
                                                  th:style="${candidate.experienceMatch ? 'color: #2ecc71;' : 'color: #e74c3c;'}">
                                                ✓ Đạt
                                            </span>
                                        </div>
                                        <div class="match-detail-bar">
                                            <div class="match-detail-bar-fill" 
                                                 th:style="${'width: ' + (candidate.experienceMatch ? '100' : '0') + '%'}">
                                            </div>
                                        </div>
                                        
                                        <!-- Education (10%) -->
                                        <div class="match-detail-item" style="margin-top: 8px;">
                                            <span class="match-detail-label">
                                                <i class="fas fa-graduation-cap" style="color: #9b59b6;"></i> Học vấn (10%)
                                            </span>
                                            <span class="match-detail-value" style="color: #2ecc71;">
                                                ✓ Có
                                            </span>
                                        </div>
                                        
                                        <!-- Certificates (5%) -->
                                        <div class="match-detail-item">
                                            <span class="match-detail-label">
                                                <i class="fas fa-certificate" style="color: #f39c12;"></i> Chứng chỉ (5%)
                                            </span>
                                            <span class="match-detail-value" style="color: #f39c12;">
                                                Bonus
                                            </span>
                                        </div>
                                        
                                        <!-- Total -->
                                        <div style="margin-top: 12px; padding-top: 12px; border-top: 2px solid #e0e6ed; font-weight: 600;">
                                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                                <span style="color: #2c3e50;">Tổng điểm:</span>
                                                <span style="color: #667eea; font-size: 16px;" th:text="${candidate.matchPercentage + '%'}">
                                                    95%
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </span>
                            </div>
                            
                            <!-- 2 Buttons nằm cùng 1 hàng -->
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <button class="view-profile-btn-new" 
                                        th:attr="data-seeker-id=${candidate.seekerId}"
                                        onclick="event.stopPropagation(); viewCandidateProfile(this.getAttribute('data-seeker-id'))"
                                        title="Xem hồ sơ chi tiết">
                                    <i class="fas fa-user-circle"></i> Xem chi tiết
                                </button>
                                
                                <button class="send-invitation-btn" 
                                        th:attr="data-seeker-id=${candidate.seekerId},data-seeker-name=${candidate.fullname}"
                                        onclick="event.stopPropagation(); sendInvitation(this.getAttribute('data-seeker-id'), this.getAttribute('data-seeker-name'))"
                                        title="Gửi lời mời ứng tuyển">
                                    <i class="fas fa-paper-plane"></i> Gửi lời mời
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Hiển thị khi không có ứng viên -->
                <div th:if="${recommendedCandidates == null or recommendedCandidates.isEmpty()}" 
                     style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 300px; color: #7f8c8d; text-align: center;margin-top: 60px;">
                    <i class="fas fa-user-slash" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                    <p style="margin: 5px 0;">Chưa có ứng viên phù hợp</p>
                    <p style="font-size: 12px; margin: 5px 0;">Hãy đăng tin tuyển dụng để nhận gợi ý ứng viên</p>
                </div>
            </div>

            <!-- Email Notifications -->
            <!-- <div class="content-card">
                <h4>
                    <div class="icon" style="background: #f8d7da; color: #e74c3c;">
                        <i class="fas fa-envelope"></i>
                    </div>
                    Spam mail tự động
                </h4>
                <p style="color: #7f8c8d; font-size: 14px; margin-bottom: 15px;">
                    Chào bạn! Chúng tôi có một cơ hội việc làm thú vị có thể phù hợp với profile của bạn
                </p>
                <div style="display: flex; gap: 10px;">
                    <button class="action-btn">Gửi ngay</button>
                    <button class="action-btn secondary">Chỉnh sửa</button>
                </div>
            </div> -->
        </div>

        <!-- Charts Section -->
        <!-- Biểu đồ thống kê - Chỉ hiển thị cho Premium (tier >= 2) -->
        <div class="charts-grid" th:if="${currentTier != null and currentTier >= 2}">
            <div class="chart-card">
                <div class="chart-header">
                    <h4>Ứng viên theo vị trí
                        <span style="font-size: 0.75rem; color: #f39c12; margin-left: 8px;">
                            <i class="fas fa-crown"></i> Premium
                        </span>
                    </h4>
                    <select id="positionPeriodFilter" style="padding: 5px 10px; border: 1px solid #e0e6ed; border-radius: 6px;">
                        <option value="7days" selected>7 ngày gần nhất</option>
                        <option value="1month">1 tháng gần nhất</option>
                        <option value="3months">3 tháng gần nhất</option>
                        <option value="6months">6 tháng gần nhất</option>
                        <option value="12months">12 tháng gần nhất</option>
                    </select>
                </div>
                <div style="padding: 20px; height: 350px; position: relative;">
                    <canvas id="candidatesByPositionChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h4>Xu hướng ứng viên
                        <span style="font-size: 0.75rem; color: #f39c12; margin-left: 8px;">
                            <i class="fas fa-crown"></i> Premium
                        </span>
                    </h4>
                    <select id="trendPeriodFilter" style="padding: 5px 10px; border: 1px solid #e0e6ed; border-radius: 6px;">
                        <option value="7days" selected>7 ngày gần nhất</option>
                        <option value="1month">1 tháng gần nhất</option>
                        <option value="3months">3 tháng gần nhất</option>
                        <option value="6months">6 tháng gần nhất</option>
                        <option value="12months">12 tháng gần nhất</option>
                    </select>
                </div>
                <div style="padding: 20px; height: 350px; position: relative;">
                    <canvas id="candidatesTrendChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h4>Trạng thái ứng viên
                        <span style="font-size: 0.75rem; color: #f39c12; margin-left: 8px;">
                            <i class="fas fa-crown"></i> Premium
                        </span>
                    </h4>
                    <select id="statusPeriodFilter" style="padding: 5px 10px; border: 1px solid #e0e6ed; border-radius: 6px;">
                        <option value="7days" selected>7 ngày gần nhất</option>
                        <option value="1month">1 tháng gần nhất</option>
                        <option value="3months">3 tháng gần nhất</option>
                        <option value="6months">6 tháng gần nhất</option>
                        <option value="12months">12 tháng gần nhất</option>
                    </select>
                </div>
                <div style="padding: 20px; height: 350px; position: relative; display: flex; justify-content: center; align-items: center;">
                    <canvas id="candidatesStatusChart" style="max-width: 300px; max-height: 300px;"></canvas>
                </div>
            </div>
        </div>

        <!-- Modal xem chi tiết profile ứng viên -->
        <div id="candidateProfileModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-user-circle"></i> Thông tin ứng viên</h3>
                    <button class="close-modal" onclick="closeProfileModal()">&times;</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <div class="loading">
                        <i class="fas fa-spinner"></i>
                        <p>Đang tải thông tin...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal gửi lời mời -->
        <div id="invitationModal" class="modal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h3><i class="fas fa-paper-plane"></i> Gửi lời mời ứng tuyển</h3>
                    <button class="close-modal" onclick="closeInvitationModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="margin-bottom: 20px;">
                        <p style="color: #2c3e50; margin-bottom: 10px;">
                            <strong>Ứng viên:</strong> <span id="invitationCandidateName"></span>
                        </p>
                        <p style="color: #7f8c8d; font-size: 14px;">
                            Nhập nội dung lời mời bạn muốn gửi đến ứng viên này:
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #2c3e50; font-weight: 600;">
                            Nội dung lời mời:
                        </label>
                        <textarea id="invitationMessage" 
                                  rows="8" 
                                  style="width: 100%; padding: 12px; border: 1px solid #e0e6ed; border-radius: 8px; font-size: 14px; font-family: inherit; resize: vertical;"
                                  placeholder="Ví dụ: Chào bạn, chúng tôi rất ấn tượng với hồ sơ của bạn và muốn mời bạn ứng tuyển vào vị trí..."></textarea>
                        <p style="color: #7f8c8d; font-size: 12px; margin-top: 5px;">
                            <i class="fas fa-info-circle"></i> Nội dung này sẽ được gửi kèm trong email mời ứng tuyển
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button class="action-btn" onclick="confirmSendInvitation()" style="flex: 1;">
                            <i class="fas fa-paper-plane"></i> Gửi lời mời
                        </button>
                        <button class="action-btn secondary" onclick="closeInvitationModal()">
                            <i class="fas fa-times"></i> Hủy
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
        // Test modal on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded');
            const modal = document.getElementById('invitationModal');
            console.log('Invitation modal found:', modal ? 'YES' : 'NO');
        });
        
        // Hàm xem chi tiết profile ứng viên
        function viewCandidateProfile(seekerId) {
            const modal = document.getElementById('candidateProfileModal');
            const modalBody = document.getElementById('modalBody');
            
            // Hiển thị modal với loading state
            modal.style.display = 'block';
            modalBody.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Đang tải thông tin...</p>
                </div>
            `;
            
            // Gọi API để lấy thông tin chi tiết
            fetch(`/api/employer/candidates/profile/${seekerId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayCandidateProfile(data.data);
                    } else {
                        modalBody.innerHTML = `
                            <div style="text-align: center; padding: 40px; color: #e74c3c;">
                                <i class="fas fa-exclamation-circle" style="font-size: 48px; margin-bottom: 15px;"></i>
                                <p>Không thể tải thông tin ứng viên</p>
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    modalBody.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #e74c3c;">
                            <i class="fas fa-exclamation-circle" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>Đã xảy ra lỗi khi tải thông tin</p>
                        </div>
                    `;
                });
        }

        // Hàm hiển thị thông tin profile
        function displayCandidateProfile(profile) {
            const modalBody = document.getElementById('modalBody');
            
            let skillsHtml = '';
            if (profile.skills && profile.skills.length > 0) {
                skillsHtml = profile.skills.map(skill => `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <strong style="color: #2c3e50;">${skill.skill_name}</strong>
                                ${skill.description ? `<p style="color: #7f8c8d; font-size: 13px; margin: 5px 0 0 0;">${skill.description}</p>` : ''}
                            </div>
                            <span style="background: #667eea; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px;">
                                ${skill.years_of_experience} năm
                            </span>
                        </div>
                    </div>
                `).join('');
            } else {
                skillsHtml = '<p style="color: #7f8c8d;">Chưa cập nhật kỹ năng</p>';
            }

            let experiencesHtml = '';
            if (profile.experiences && profile.experiences.length > 0) {
                experiencesHtml = profile.experiences.map(exp => `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <strong style="color: #2c3e50;">${exp.job_title}</strong>
                        <p style="color: #667eea; margin: 5px 0;">${exp.company_name}</p>
                        <p style="color: #7f8c8d; font-size: 13px;">
                            ${formatDate(exp.start_date)} - ${exp.end_date ? formatDate(exp.end_date) : 'Hiện tại'}
                        </p>
                        ${exp.project_link ? `<a href="${exp.project_link}" target="_blank" style="color: #667eea; font-size: 13px;"><i class="fas fa-link"></i> Xem dự án</a>` : ''}
                    </div>
                `).join('');
            } else {
                experiencesHtml = '<p style="color: #7f8c8d;">Chưa cập nhật kinh nghiệm làm việc</p>';
            }

            let educationHtml = '';
            if (profile.education && profile.education.length > 0) {
                educationHtml = profile.education.map(edu => `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <strong style="color: #2c3e50;">${edu.university || 'Trường học'}</strong>
                        <p style="color: #667eea; margin: 5px 0;">${edu.degree_level || ''}</p>
                        <p style="color: #7f8c8d; font-size: 13px;">
                            ${formatDate(edu.start_date)} - ${edu.graduation_date ? formatDate(edu.graduation_date) : 'Hiện tại'}
                        </p>
                        ${edu.description ? `<p style="color: #7f8c8d; font-size: 13px; margin-top: 5px;">${edu.description}</p>` : ''}
                    </div>
                `).join('');
            } else {
                educationHtml = '<p style="color: #7f8c8d;">Chưa cập nhật học vấn</p>';
            }
            
            // Languages
            let languagesHtml = '';
            if (profile.languages && profile.languages.length > 0) {
                languagesHtml = profile.languages.map(lang => `
                    <div style="background: #f8f9fa; padding: 12px 15px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                        <strong style="color: #2c3e50;">${lang.language_name}</strong>
                        <span style="color: #667eea; font-size: 13px;">${lang.certificate_type || ''}</span>
                    </div>
                `).join('');
            } else {
                languagesHtml = '<p style="color: #7f8c8d;">Chưa cập nhật ngôn ngữ</p>';
            }
            
            // Certificates
            let certificatesHtml = '';
            if (profile.certificates && profile.certificates.length > 0) {
                certificatesHtml = profile.certificates.map(cert => `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <strong style="color: #2c3e50;">${cert.issuing_organization}</strong>
                                ${cert.year_of_completion ? `<p style="color: #7f8c8d; font-size: 13px; margin: 5px 0;">Năm: ${cert.year_of_completion}</p>` : ''}
                            </div>
                            ${cert.certificate_image_url ? `
                                <img src="${cert.certificate_image_url}" alt="Certificate" style="max-width: 100px; max-height: 80px; border-radius: 4px; object-fit: cover;">
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                certificatesHtml = '<p style="color: #7f8c8d;">Chưa cập nhật chứng chỉ</p>';
            }
            
            modalBody.innerHTML = `
                <!-- Thông tin cơ bản -->
                <div class="profile-section">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: 600;">
                            ${getInitials(profile.fullname)}
                        </div>
                        <div>
                            <h2 style="margin: 0; color: #2c3e50;">${profile.fullname}</h2>
                            <p style="color: #667eea; margin: 5px 0;">${profile.headline || 'Chưa cập nhật tiêu đề'}</p>
                            <p style="color: #7f8c8d; font-size: 14px; margin: 5px 0;">
                                <i class="fas fa-briefcase"></i> ${profile.experience_years || 0} năm kinh nghiệm
                            </p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                        ${profile.email ? `
                            <div>
                                <p style="color: #7f8c8d; font-size: 12px; margin: 0;">Email</p>
                                <p style="color: #2c3e50; margin: 5px 0;"><i class="fas fa-envelope"></i> ${profile.email}</p>
                            </div>
                        ` : ''}
                        ${profile.phone ? `
                            <div>
                                <p style="color: #7f8c8d; font-size: 12px; margin: 0;">Số điện thoại</p>
                                <p style="color: #2c3e50; margin: 5px 0;"><i class="fas fa-phone"></i> ${profile.phone}</p>
                            </div>
                        ` : ''}
                        ${profile.location ? `
                            <div>
                                <p style="color: #7f8c8d; font-size: 12px; margin: 0;">Địa điểm</p>
                                <p style="color: #2c3e50; margin: 5px 0;"><i class="fas fa-map-marker-alt"></i> ${profile.location}</p>
                            </div>
                        ` : ''}
                    </div>
                </div>

                ${profile.about ? `
                    <div class="profile-section">
                        <h4><i class="fas fa-info-circle"></i> Giới thiệu</h4>
                        <p style="color: #2c3e50; line-height: 1.6;">${profile.about}</p>
                    </div>
                ` : ''}

                <!-- Kỹ năng -->
                <div class="profile-section">
                    <h4><i class="fas fa-code"></i> Kỹ năng</h4>
                    ${skillsHtml}
                </div>

                <!-- Kinh nghiệm làm việc -->
                <div class="profile-section">
                    <h4><i class="fas fa-briefcase"></i> Kinh nghiệm làm việc</h4>
                    ${experiencesHtml}
                </div>

                <!-- Học vấn -->
                <div class="profile-section">
                    <h4><i class="fas fa-graduation-cap"></i> Học vấn</h4>
                    ${educationHtml}
                </div>

                <!-- Ngôn ngữ -->
                <div class="profile-section">
                    <h4><i class="fas fa-language"></i> Ngôn ngữ</h4>
                    ${languagesHtml}
                </div>

                <!-- Chứng chỉ -->
                <div class="profile-section">
                    <h4><i class="fas fa-certificate"></i> Chứng chỉ</h4>
                    ${certificatesHtml}
                </div>

                <!-- Action buttons -->
                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button class="action-btn" onclick="sendInvitationFromProfile(${profile.seeker_id}, '${profile.fullname}')" style="flex: 1;">
                        <i class="fas fa-paper-plane"></i> Gửi lời mời ứng tuyển
                    </button>
                    <button class="action-btn secondary" onclick="closeProfileModal()">
                        <i class="fas fa-times"></i> Đóng
                    </button>
                </div>
            `;
        }

        // Hàm gửi lời mời từ modal profile
        function sendInvitationFromProfile(seekerId, seekerName) {
            // Đóng modal profile
            closeProfileModal();
            // Mở modal gửi lời mời
            sendInvitation(seekerId, seekerName);
        }
        
        // Hàm đóng modal
        function closeProfileModal() {
            document.getElementById('candidateProfileModal').style.display = 'none';
        }

        // Đóng modal khi click bên ngoài
        window.onclick = function(event) {
            const profileModal = document.getElementById('candidateProfileModal');
            const invitationModal = document.getElementById('invitationModal');
            
            if (event.target === profileModal) {
                closeProfileModal();
            }
            
            if (event.target === invitationModal) {
                closeInvitationModal();
            }
        }

        // Helper functions
        function getInitials(name) {
            if (!name) return '??';
            const parts = name.trim().split(/\s+/);
            if (parts.length === 1) {
                return parts[0].substring(0, 2).toUpperCase();
            }
            return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase();
        }

        function formatDate(dateStr) {
            if (!dateStr) return '';
            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            return `${month}/${year}`;
        }
        
        // Biến lưu thông tin tạm thời
        let currentInvitationData = {
            seekerId: null,
            seekerName: null,
            button: null
        };
        
        // Hàm mở modal nhập nội dung lời mời
        function sendInvitation(seekerId, seekerName) {
            console.log('sendInvitation called:', seekerId, seekerName);
            
            // Lưu thông tin
            currentInvitationData.seekerId = seekerId;
            currentInvitationData.seekerName = seekerName;
            currentInvitationData.button = event.target.closest('button');
            
            // Hiển thị modal
            const modal = document.getElementById('invitationModal');
            console.log('Modal element:', modal);
            
            if (!modal) {
                console.error('Modal not found!');
                alert('Lỗi: Không tìm thấy modal!');
                return;
            }
            
            document.getElementById('invitationCandidateName').textContent = seekerName;
            
            // Set nội dung mặc định
            const defaultMessage = `Chào ${seekerName},\n\nChúng tôi rất ấn tượng với hồ sơ của bạn và muốn mời bạn ứng tuyển vào các vị trí đang tuyển dụng tại công ty chúng tôi.\n\nVui lòng xem chi tiết và ứng tuyển qua hệ thống của chúng tôi.\n\nTrân trọng!`;
            document.getElementById('invitationMessage').value = defaultMessage;
            
            modal.style.display = 'block';
            console.log('Modal display set to block');
        }
        
        // Hàm đóng modal
        function closeInvitationModal() {
            document.getElementById('invitationModal').style.display = 'none';
            currentInvitationData = { seekerId: null, seekerName: null, button: null };
        }
        
        // Hàm xác nhận gửi lời mời
        function confirmSendInvitation() {
            const message = document.getElementById('invitationMessage').value.trim();
            
            if (!message) {
                alert('Vui lòng nhập nội dung lời mời!');
                return;
            }
            
            const { seekerId, seekerName, button } = currentInvitationData;
            
            // Đóng modal
            closeInvitationModal();
            
            // Disable button để tránh click nhiều lần
            const originalHtml = button.innerHTML;
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang gửi...';
            
            // Gọi API gửi lời mời
            fetch(`/api/employer/candidates/send-invitation/${seekerId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Hiển thị thông báo thành công
                    button.innerHTML = '<i class="fas fa-check"></i> Đã gửi';
                    button.style.background = '#2ecc71';
                    
                    // Hiển thị alert
                    alert(data.message || 'Đã gửi lời mời thành công!');
                    
                    // Reset button sau 3 giây
                    setTimeout(() => {
                        button.innerHTML = originalHtml;
                        button.disabled = false;
                        button.style.background = '';
                    }, 3000);
                } else {
                    // Hiển thị lỗi
                    alert(data.message || 'Có lỗi xảy ra khi gửi lời mời');
                    button.innerHTML = originalHtml;
                    button.disabled = false;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Có lỗi xảy ra khi gửi lời mời');
                button.innerHTML = originalHtml;
                button.disabled = false;
            });
        }
        
        // ========== HÀM HIỂN THỊ MESSAGE KHI KHÔNG CÓ DỮ LIỆU ==========
        function showNoDataMessage(canvas, message) {
            // Ẩn canvas
            canvas.style.display = 'none';
            
            // Tìm hoặc tạo div message
            let messageDiv = canvas.parentElement.querySelector('.no-data-message');
            
            if (!messageDiv) {
                messageDiv = document.createElement('div');
                messageDiv.className = 'no-data-message';
                messageDiv.style.cssText = `
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    height: 100%;
                    color: #95a5a6;
                    text-align: center;
                `;
                canvas.parentElement.appendChild(messageDiv);
            }
            
            messageDiv.innerHTML = `
                <i class="fas fa-chart-bar" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                <p style="margin: 0; font-size: 14px;">${message}</p>
            `;
            messageDiv.style.display = 'flex';
        }
        
        // ========== XỬ LÝ TOOLTIP CHO MATCH DETAILS ==========
        function setupMatchDetailsTooltips() {
            const matchBadges = document.querySelectorAll('.match-badge');
            
            matchBadges.forEach(badge => {
                const matchDetails = badge.querySelector('.match-details');
                if (!matchDetails) return;
                
                badge.addEventListener('mouseenter', function(e) {
                    const rect = badge.getBoundingClientRect();
                    const detailsWidth = 300; // Approximate width
                    const detailsHeight = 250; // Approximate height
                    
                    // Tính toán vị trí
                    let left = rect.right + 10; // Mặc định hiển thị bên phải
                    let top = rect.top;
                    
                    // Nếu không đủ chỗ bên phải, hiển thị bên trái
                    if (left + detailsWidth > window.innerWidth) {
                        left = rect.left - detailsWidth - 10;
                    }
                    
                    // Nếu không đủ chỗ phía dưới, điều chỉnh lên trên
                    if (top + detailsHeight > window.innerHeight) {
                        top = window.innerHeight - detailsHeight - 10;
                    }
                    
                    // Đảm bảo không bị tràn ra ngoài màn hình
                    if (top < 10) top = 10;
                    if (left < 10) left = 10;
                    
                    matchDetails.style.left = left + 'px';
                    matchDetails.style.top = top + 'px';
                });
                
                badge.addEventListener('mouseleave', function(e) {
                    // Kiểm tra xem chuột có di chuyển vào matchDetails không
                    const relatedTarget = e.relatedTarget;
                    if (relatedTarget && matchDetails.contains(relatedTarget)) {
                        return; // Không ẩn nếu chuột vào tooltip
                    }
                });
                
                if (matchDetails) {
                    matchDetails.addEventListener('mouseleave', function(e) {
                        // Ẩn tooltip khi chuột rời khỏi nó
                        const relatedTarget = e.relatedTarget;
                        if (!badge.contains(relatedTarget)) {
                            matchDetails.style.display = 'none';
                        }
                    });
                }
            });
        }
        
        // ========== BIỂU ĐỒ THỐNG KÊ ỨNG VIÊN THEO VỊ TRÍ ==========
        let positionChart = null;
        
        // Hàm load dữ liệu và vẽ biểu đồ
        function loadCandidatesByPosition() {
            // Lấy giá trị period từ dropdown
            const periodSelect = document.getElementById('positionPeriodFilter');
            const period = periodSelect ? periodSelect.value : '7days';
            
            fetch(`/employer/api/candidates-by-position?period=${period}`)
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data) {
                        renderPositionChart(result.data);
                    } else {
                        console.error('Failed to load chart data:', result);
                    }
                })
                .catch(error => {
                    console.error('Error loading chart data:', error);
                });
        }
        
        // Hàm vẽ biểu đồ
        function renderPositionChart(data) {
            const ctx = document.getElementById('candidatesByPositionChart');
            if (!ctx) {
                console.error('Canvas element not found');
                return;
            }
            
            // Hủy biểu đồ cũ nếu có
            if (positionChart) {
                positionChart.destroy();
                positionChart = null;
            }
            
            // Kiểm tra nếu không có dữ liệu
            if (!data || data.length === 0) {
                showNoDataMessage(ctx, 'Không có dữ liệu ứng viên theo vị trí');
                return;
            }
            
            // Hiển thị lại canvas và ẩn message
            ctx.style.display = 'block';
            const messageDiv = ctx.parentElement.querySelector('.no-data-message');
            if (messageDiv) messageDiv.style.display = 'none';
            
            // Chuẩn bị dữ liệu
            const labels = data.map(item => item.position);
            const counts = data.map(item => item.candidateCount);
            
            // Tạo biểu đồ mới
            positionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Số lượng ứng viên',
                        data: counts,
                        backgroundColor: '#3498db',
                        borderColor: '#2980b9',
                        borderWidth: 1,
                        borderRadius: 8,
                        barThickness: 50
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            },
                            callbacks: {
                                label: function(context) {
                                    return 'Số ứng viên: ' + context.parsed.y;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 10,
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        
        // Load biểu đồ khi trang được tải
        document.addEventListener('DOMContentLoaded', function() {
            loadCandidatesByPosition();
            loadCandidatesTrend();
            loadCandidatesStatus();
            loadDashboardStats();
            loadPositions(); // Sẽ tự động gọi loadMarketAnalysis() sau khi load xong
            
            // Xử lý positioning cho match-details tooltip
            setupMatchDetailsTooltips();
            
            // Thêm event listener cho dropdown filter vị trí
            const positionFilterSelect = document.getElementById('positionPeriodFilter');
            if (positionFilterSelect) {
                positionFilterSelect.addEventListener('change', function() {
                    loadCandidatesByPosition();
                });
            }
            
            // Thêm event listener cho dropdown filter xu hướng
            const trendFilterSelect = document.getElementById('trendPeriodFilter');
            if (trendFilterSelect) {
                trendFilterSelect.addEventListener('change', function() {
                    loadCandidatesTrend();
                });
            }
            
            // Thêm event listener cho dropdown filter trạng thái
            const statusFilterSelect = document.getElementById('statusPeriodFilter');
            if (statusFilterSelect) {
                statusFilterSelect.addEventListener('change', function() {
                    loadCandidatesStatus();
                });
            }
            
            // Thêm event listener cho dropdown filter stats
            const statsFilterSelect = document.getElementById('statsFilterPeriod');
            if (statsFilterSelect) {
                statsFilterSelect.addEventListener('change', function() {
                    loadDashboardStats();
                });
            }
            
            // Thêm event listener cho dropdown filter market analysis
            const marketFilterSelect = document.getElementById('marketPositionFilter');
            if (marketFilterSelect) {
                marketFilterSelect.addEventListener('change', function() {
                    loadMarketAnalysis();
                });
            }
        });
        
        // ========== BIỂU ĐỒ XU HƯỚNG ỨNG VIÊN ==========
        let trendChart = null;
        
        // Hàm load dữ liệu xu hướng
        function loadCandidatesTrend() {
            // Lấy giá trị period từ dropdown
            const periodSelect = document.getElementById('trendPeriodFilter');
            const period = periodSelect ? periodSelect.value : '3months';
            
            fetch(`/employer/api/candidates-trend?period=${period}`)
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data) {
                        renderTrendChart(result.data);
                    } else {
                        console.error('Failed to load trend data:', result);
                    }
                })
                .catch(error => {
                    console.error('Error loading trend data:', error);
                });
        }
        
        // Hàm vẽ biểu đồ xu hướng
        function renderTrendChart(data) {
            const ctx = document.getElementById('candidatesTrendChart');
            if (!ctx) {
                console.error('Canvas element not found');
                return;
            }
            
            // Hủy biểu đồ cũ nếu có
            if (trendChart) {
                trendChart.destroy();
                trendChart = null;
            }
            
            // Kiểm tra nếu không có dữ liệu
            if (!data || data.length === 0) {
                showNoDataMessage(ctx, 'Không có dữ liệu xu hướng ứng viên');
                return;
            }
            
            // Hiển thị lại canvas và ẩn message
            ctx.style.display = 'block';
            const messageDiv = ctx.parentElement.querySelector('.no-data-message');
            if (messageDiv) messageDiv.style.display = 'none';
            
            // Chuẩn bị dữ liệu
            const labels = data.map(item => item.period);
            const counts = data.map(item => item.candidateCount);
            
            // Tạo biểu đồ mới
            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Số lượng ứng viên',
                        data: counts,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 5,
                        pointBackgroundColor: '#3498db',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 7,
                        pointHoverBackgroundColor: '#2980b9',
                        pointHoverBorderColor: '#fff',
                        pointHoverBorderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            },
                            callbacks: {
                                label: function(context) {
                                    return 'Số ứng viên: ' + context.parsed.y;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 10,
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }
        
        // ========== BIỂU ĐỒ TRẠNG THÁI ỨNG VIÊN ==========
        let statusChart = null;
        
        // Hàm load dữ liệu trạng thái
        function loadCandidatesStatus() {
            // Lấy giá trị period từ dropdown
            const periodSelect = document.getElementById('statusPeriodFilter');
            const period = periodSelect ? periodSelect.value : '1day';
            
            fetch(`/employer/api/candidates-status?period=${period}`)
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data) {
                        renderStatusChart(result.data);
                    } else {
                        console.error('Failed to load status data:', result);
                    }
                })
                .catch(error => {
                    console.error('Error loading status data:', error);
                });
        }
        
        // Hàm vẽ biểu đồ trạng thái
        function renderStatusChart(data) {
            const ctx = document.getElementById('candidatesStatusChart');
            if (!ctx) {
                console.error('Canvas element not found');
                return;
            }
            
            // Hủy biểu đồ cũ nếu có
            if (statusChart) {
                statusChart.destroy();
                statusChart = null;
            }
            
            // Kiểm tra nếu không có dữ liệu
            if (!data || data.length === 0) {
                showNoDataMessage(ctx, 'Không có dữ liệu trạng thái ứng viên');
                return;
            }
            
            // Hiển thị lại canvas và ẩn message
            ctx.style.display = 'block';
            const messageDiv = ctx.parentElement.querySelector('.no-data-message');
            if (messageDiv) messageDiv.style.display = 'none';
            
            // Chuẩn bị dữ liệu
            const labels = data.map(item => item.statusLabel);
            const counts = data.map(item => item.count);
            
            // Màu sắc cho từng trạng thái (theo thứ tự: Đã nộp, Đã xem, Đã phỏng vấn, Đã tuyển, Từ chối)
            const backgroundColors = [];
            const borderColors = [];
            
            data.forEach(item => {
                let color;
                switch(item.status.toLowerCase()) {
                    case 'submitted':
                        color = '#3498db'; // Xanh dương - Đã nộp
                        break;
                    case 'reviewed':
                        color = '#1abc9c'; // Xanh lá nhạt - Đã xem
                        break;
                    case 'interviewed':
                        color = '#5dade2'; // Xanh nhạt - Đã phỏng vấn
                        break;
                    case 'hired':
                        color = '#16a085'; // Xanh đậm - Đã tuyển
                        break;
                    case 'rejected':
                        color = '#e74c3c'; // Đỏ - Từ chối
                        break;
                    default:
                        color = '#95a5a6'; // Xám
                }
                backgroundColors.push(color);
                borderColors.push('#ffffff');
            });
            
            // Tạo biểu đồ mới
            statusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 13
                                },
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            },
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return label + ': ' + value + ' (' + percentage + '%)';
                                }
                            }
                        }
                    },
                    cutout: '60%' // Tạo hiệu ứng donut (vòng tròn rỗng giữa)
                }
            });
        }
        
        // ========== THỐNG KÊ TỔNG QUAN ==========
        function loadDashboardStats() {
            const periodSelect = document.getElementById('statsFilterPeriod');
            const period = periodSelect ? periodSelect.value : '3months';
            
            fetch(`/employer/api/dashboard-stats?period=${period}`)
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data) {
                        updateDashboardStats(result.data);
                    } else {
                        console.error('Failed to load dashboard stats:', result);
                    }
                })
                .catch(error => {
                    console.error('Error loading dashboard stats:', error);
                });
        }
        
        function updateDashboardStats(data) {
            // Cập nhật giá trị
            document.getElementById('totalJobsValue').textContent = data.totalJobs || 0;
            document.getElementById('totalApplicationsValue').textContent = data.totalApplications || 0;
            document.getElementById('pendingReviewValue').textContent = data.pendingReview || 0;
            document.getElementById('reviewedCountValue').textContent = data.reviewedCount || 0;
            document.getElementById('rejectedCountValue').textContent = data.rejectedCount || 0;
            document.getElementById('acceptedCountValue').textContent = data.acceptedCount || 0;
            
            // Cập nhật phần trăm thay đổi
            updateChangePercent('jobsChange', data.jobsChangePercent);
            updateChangePercent('applicationsChange', data.applicationsChangePercent);
            updateChangePercent('pendingChange', data.pendingChangePercent);
            updateChangePercent('reviewedChange', data.reviewedChangePercent);
            updateChangePercent('rejectedChange', data.rejectedChangePercent);
            updateChangePercent('acceptedChange', data.acceptedChangePercent);
        }
        
        function updateChangePercent(elementId, percent) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const value = Math.round(percent * 10) / 10; // Làm tròn 1 chữ số thập phân
            const sign = value >= 0 ? '+' : '';
            
            element.textContent = sign + value + '%';
            
            // Thay đổi màu sắc dựa trên giá trị
            if (value > 0) {
                element.style.color = '#2ecc71'; // Xanh lá - tăng
                element.style.background = '#d4edda';
            } else if (value < 0) {
                element.style.color = '#e74c3c'; // Đỏ - giảm
                element.style.background = '#f8d7da';
            } else {
                element.style.color = '#95a5a6'; // Xám - không đổi
                element.style.background = '#ecf0f1';
            }
        }
        
        // ========== PHÂN TÍCH THỊ TRƯỜNG ==========
        function loadPositions() {
            fetch('/employer/api/positions')
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data && result.data.length > 0) {
                        const select = document.getElementById('marketPositionFilter');
                        if (select) {
                            // Thêm các options
                            result.data.forEach((position, index) => {
                                const option = document.createElement('option');
                                option.value = position;
                                option.textContent = position;
                                select.appendChild(option);
                                
                                // Auto select option đầu tiên
                                if (index === 0) {
                                    option.selected = true;
                                }
                            });
                            
                            // Load market analysis với position đầu tiên
                            loadMarketAnalysis();
                        }
                    }
                })
                .catch(error => {
                    console.error('Error loading positions:', error);
                });
        }
        
        function loadMarketAnalysis() {
            const positionSelect = document.getElementById('marketPositionFilter');
            const position = positionSelect ? positionSelect.value : '';
            
            const url = position ? `/employer/api/market-analysis?position=${encodeURIComponent(position)}` : '/employer/api/market-analysis';
            
            fetch(url)
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data) {
                        renderMarketAnalysis(result.data);
                    } else {
                        showNoMarketData();
                    }
                })
                .catch(error => {
                    console.error('Error loading market analysis:', error);
                    showNoMarketData();
                });
        }
        
        function renderMarketAnalysis(data) {
            const container = document.getElementById('marketAnalysisContent');
            if (!container) return;
            
            // Format số tiền
            const formatCurrency = (amount) => {
                if (!amount || amount === 0) return 'Chưa có dữ liệu';
                if (amount < 1000000) {
                    return amount.toLocaleString('vi-VN') + ' triệu VNĐ';
                }
                return (amount / 1000000).toFixed(1) + ' triệu VNĐ';
            };
            
            // Format phần trăm
            const formatPercent = (value) => {
                if (value === null || value === undefined) return '0';
                return value >= 0 ? '+' + value.toFixed(1) : value.toFixed(1);
            };
            
            // Icon cho mức độ cạnh tranh
            const getCompetitionIcon = (level) => {
                switch(level) {
                    case 'Cao': return '<i class="fas fa-fire" style="color: #e74c3c;"></i>';
                    case 'Trung bình': return '<i class="fas fa-chart-line" style="color: #f39c12;"></i>';
                    case 'Thấp': return '<i class="fas fa-leaf" style="color: #2ecc71;"></i>';
                    default: return '<i class="fas fa-question-circle" style="color: #95a5a6;"></i>';
                }
            };
            
            container.innerHTML = `
                <div class="job-item">
                    <div class="job-title">
                        <i class="fas fa-chart-line" style="color: #3498db; margin-right: 8px;"></i>
                        Xu hướng tuyển dụng
                    </div>
                    <div class="job-meta">
                        ${formatPercent(data.growthRate)}% so với 3 tháng trước 
                        (${data.activeJobs} tin đang tuyển / ${data.totalJobs} tổng tin)
                    </div>
                </div>
                <div class="job-item">
                    <div class="job-title">
                        <i class="fas fa-money-bill-wave" style="color: #2ecc71; margin-right: 8px;"></i>
                        Mức lương
                    </div>
                    <div class="job-meta">
                        ${data.avgSalary && data.avgSalary > 0 
                            ? 'Mức lương trung bình: ' + formatCurrency(data.avgSalary) 
                            : 'Chưa có dữ liệu mức lương'}
                        ${data.avgSalaryMin && data.avgSalaryMax && data.avgSalaryMin > 0 && data.avgSalaryMax > 0
                            ? '<br><small style="color: #7f8c8d;">(Khoảng: ' + formatCurrency(data.avgSalaryMin) + ' - ' + formatCurrency(data.avgSalaryMax) + ')</small>'
                            : ''}
                    </div>
                </div>
                <div class="job-item">
                    <div class="job-title">
                        ${getCompetitionIcon(data.competitionLevel)}
                        Mức độ cạnh tranh
                    </div>
                    <div class="job-meta">
                        Cạnh tranh ${data.competitionLevel.toLowerCase()} trong ${data.position ? 'lĩnh vực ' + data.position : 'thị trường'}
                        <br>
                        <small style="color: #7f8c8d;">(${Math.round(data.avgApplicantsPerJob)} ứng viên/tin tuyển dụng)</small>
                    </div>
                </div>
                <div class="job-item">
                    <div class="job-title">
                        <i class="fas fa-briefcase" style="color: #9b59b6; margin-right: 8px;"></i>
                        Kinh nghiệm phổ biến
                    </div>
                    <div class="job-meta">
                        ${data.mostCommonExperience || 'Chưa có dữ liệu'}
                    </div>
                </div>
                <div class="job-item" style="border-bottom: none;">
                    <div class="job-title">
                        <i class="fas fa-map-marker-alt" style="color: #e74c3c; margin-right: 8px;"></i>
                        Địa điểm phổ biến
                    </div>
                    <div class="job-meta">
                        ${data.topLocation || 'Chưa có dữ liệu'}
                    </div>
                </div>
            `;
        }
        
        function showNoMarketData() {
            const container = document.getElementById('marketAnalysisContent');
            if (!container) return;
            
            container.innerHTML = `
                <div style="text-align: center; padding: 30px; color: #7f8c8d;">
                    <i class="fas fa-chart-bar" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                    <p>Chưa có dữ liệu phân tích cho vị trí này</p>
                </div>
            `;
        }
        
        // Function để mở chatbot
        function openChatbot() {
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotBox = document.getElementById('chatbot-box');
            
            if (chatbotToggle && chatbotBox) {
                // Hiển thị chatbot box
                chatbotBox.style.display = 'flex';
                chatbotToggle.style.display = 'none';
                
                // Focus vào input field
                setTimeout(() => {
                    const inputField = document.getElementById('chatbot-input-field');
                    if (inputField) {
                        inputField.focus();
                    }
                }, 100);
            } else {
                // Nếu không tìm thấy chatbot (tier < 3), hiển thị thông báo
                alert('Tính năng AI Chat Bot chỉ dành cho gói Enterprise. Vui lòng nâng cấp tài khoản!');
            }
        }
        </script>
    </div>
</body>
</html>
